@model iVoteMVC.Models.Question

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div>
    <h4>Question</h4>
	<hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.text)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.text)
        </dd>
        <dd>
            <br />
            @Html.ActionLink("Add Answer", "Create", "Answer", new { id = Model.ID }, null)
        </dd>
        <br />
        <dt>
            @Html.DisplayNameFor(model => model.Answers)
        </dt>
        <dd>
            <table class="table">
                <tr>
                    <th>Answer</th>
                    <th>Count</th>
                </tr>
                @foreach (var Answer in Model.Answers)
                {
                    <tr>
                        <td>
                            @*@Html.ActionLink(question.text, "Details/" + question.ID, "Question")*@
                            @Html.DisplayFor(modelItem => Answer.text)
                            
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Answer.voteCount)
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", "Answer", new { id = Answer.ID }, null) |
                            @Html.ActionLink("Delete", "Delete", "Answer", new { id = Answer.ID }, null)
                        </td>
                    </tr>
                }
            </table>
        </dd>

    </dl>
</div>




<p>
    <div id="piechart_3d" style="width: 900px; height: 500px;"></div>
    @Html.ActionLink("Edit", "Edit", new { id = Model.ID }) |
    @*@Html.ActionLink("Back to List", "Index") |*@
    @Html.ActionLink("Back to Session", "Details/" + Model.SessionID, "Session")
</p>



               
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);
    function drawChart() {

        var data = new google.visualization.DataTable();

        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        @foreach(var item in Model.Answers)
        {
            <text>
            data.addRow(['@item.text',@item.voteCount])
            </text>
        }

        var options = {
            title: '@Model.text',
            is3D: true,
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
        chart.draw(data, options);
    }
</script>

